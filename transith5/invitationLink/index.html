<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<script type="text/javascript" src="https://res.wx.qq.com/open/js/jweixin-1.6.0.js"></script>

<body>
<div id="app"><!--app-html--></div>
<script type="module" src="./main.ts">
    const params = new URLSearchParams(window.location.search);
    const c = params.get('c');
    const env = params.get('env');
    const scene = `t=1001&c=${c}&type=link`
    const res = encodeURIComponent(scene)
    const envAppid = import.meta.env.VITE_MP_WEIXIN_APP_ID;
    const envType = {
      production: {
        name: 'release',
        appid: envAppid
      },
      development: {
        name: 'develop',
        appid: envAppid
      },
      staging: {
        name: 'trial',
        appid: envAppid
      },
      test: {
        name: 'trial',
        appid: envAppid
      },
    }
    let a = document.createElement("a");
    a.href = `weixin://dl/business/?appid=${envType[env].appid}&path=pagesTransfer/index&env_version=${envType[env].name}&query=` + res;
    a.click();
</script>
</body>
</html>
